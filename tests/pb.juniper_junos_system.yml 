---
- name: Test juniper.device.system module
  hosts: all
  gather_facts: no

  tasks:
    - name: Reboot all REs of the device
      juniper.device.system:
        action: "reboot"
      register: test1
      ignore_errors: True
      tags: [ test1 ]

    - name: CHECK TEST 1
      assert:
        that:
          - test1.reboot == true
      tags: [ test1 ]

    - name: Checking NETCONF connectivity
      wait_for: host={{ ansible_ssh_host }} port=22 timeout=360
